// ============================================
// Chatbot Logic - Keyword-based Responses
// ============================================

// Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ¬Ø± (ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ«Ù‡ Ù…Ù† API Ù„Ø§Ø­Ù‚Ø§Ù‹)
const storeContent = `
Ù…ØªØ¬Ø± Ù†ÙŠÙ†Ø¬Ø§ Ø§Ù„Ø¹Ø±Ø§Ù‚
Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø© Ù…Ø¹ ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª
302 Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ²
Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©
`;

// Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
const keywordMap = {
    "ØªÙˆØµÙŠÙ„": "Ù†Ø¹Ù…ØŒ Ù†ÙˆÙØ± ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©! ğŸšš",
    "Ø´Ø­Ù†": "Ù†Ø¹Ù…ØŒ Ù†ÙˆÙØ± ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©! ğŸšš",
    "Ù…Ø¬Ø§Ù†ÙŠ": "Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©! âœ“",
    "Ù…Ø­Ø§ÙØ¸Ø§Øª": "Ù†ÙˆÙØ± ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©. ğŸ“",
    "Ù…Ù†ØªØ¬Ø§Øª": "Ù„Ø¯ÙŠÙ†Ø§ Ø£ÙƒØ«Ø± Ù…Ù† 302 Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ²! ÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙØ­Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù…ØªØ¬Ø±. ğŸ›ï¸",
    "Ø³Ø¹Ø±": "Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªØ¬. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù…Ø¹Ø±ÙØ© Ø³Ø¹Ø±Ù‡. ğŸ’°",
    "ÙØ´Ø§Ø±": "Ø¬Ù‡Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ´Ø§Ø± Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 73,400 Ø¯.Ø¹. SKU: A.000161",
    "Ø­Ø±Ø§Ø±ÙŠ": "Ø§Ù„Ø´ÙˆØ±Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠ Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 73,400 Ø¯.Ø¹. SKU: A.002102",
    "Ù†Ø¸Ø§Ø±Ø©": "Ù†Ø¸Ø§Ø±Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„Ø¹ÙŠÙ† Ù…Ù† Ø§Ù„Ø§Ø´Ø¹Ø© Ù…ØªÙˆÙØ±Ø© Ø¨Ø³Ø¹Ø± 75,100 Ø¯.Ø¹. SKU: A.000855",
    "ØºØ³Ø§Ù„Ø©": "Ù…Ù†Ø¸Ù Ø§Ø³Ø·ÙˆØ§Ù†Ø© Ø§Ù„ØºØ³Ø§Ù„Ø© Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 75,131 Ø¯.Ø¹. SKU: A.001433",
    "Ù„Ø­ÙŠØ©": "Ù‚Ù„Ù… Ø§Ù„Ù„Ø­ÙŠØ© ÙˆØ²ÙŠØª Ø£ÙˆÙ…ÙŠØºØ§ Ù„ØªØ·ÙˆÙŠÙ„ Ø§Ù„Ù„Ø­ÙŠØ© Ù…ØªÙˆÙØ±Ø§Ù†! ğŸ’ˆ",
    "Ù…ÙŠØ²Ø§Ù†": "Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø·Ø¹Ø§Ù… Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 76,030 Ø¯.Ø¹. SKU: A.001247",
    "Ø±Ù‚Ø¨Ø©": "Ø­Ø²Ø§Ù… Ø§Ù„Ø±Ù‚Ø¨Ø© Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 76,190 Ø¯.Ø¹. SKU: A.001299",
    "Ø´Ø¹Ø±": "Ù„Ø¯ÙŠÙ†Ø§ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø¹Ø± ÙˆØ§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ù‡! ğŸ’‡",
    "ØªØ¨ÙŠÙŠØ¶": "Ù…Ø¹Ø¬ÙˆÙ† Ø£Ø³Ù†Ø§Ù† Ù„ØªØ¨ÙŠÙŠØ¶ Ø§Ù„Ø£Ø³Ù†Ø§Ù† Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 77,250 Ø¯.Ø¹. SKU: A.000856",
    "ØªÙ†Ø­ÙŠÙ": "Ù…Ø´Ø¯ Ø¯Ø¨Ù„ ÙÙŠØ³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ ÙˆÙ…Ø´Ø¯ Ø³ÙˆÙŠØª Ø´ÙŠØ¨Ø± Ù…ØªÙˆÙØ±Ø§Ù† Ø¨Ø³Ø¹Ø± 88,500 Ø¯.Ø¹! ğŸ’ª",
    "Ø¸Ù‡Ø±": "Ø­Ø²Ø§Ù… Ø¯Ø§Ø¹Ù… Ø§Ù„Ø¸Ù‡Ø± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…ØªÙˆÙØ± Ø¨Ø³Ø¹Ø± 88,721 Ø¯.Ø¹. SKU: A.001180",
    "ÙˆØ§ØªØ³Ø§Ø¨": "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨! ğŸ“± https://wa.me/201110760081",
    "ØªÙˆØ§ØµÙ„": "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨! ğŸ“± https://wa.me/201110760081",
    "Ø§ØªØµØ§Ù„": "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨! ğŸ“± https://wa.me/201110760081",
    "Ø¹Ù†": "Ù…ØªØ¬Ø± Ù†ÙŠÙ†Ø¬Ø§ Ø§Ù„Ø¹Ø±Ø§Ù‚ Ù…ØªØ®ØµØµ ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø©! ğŸª",
    "Ø¬ÙˆØ¯Ø©": "Ù†Ø¶Ù…Ù† Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§! âœ“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø£ØµÙ„ÙŠØ© ÙˆÙ…Ø¶Ù…ÙˆÙ†Ø©",
    "Ø¶Ù…Ø§Ù†": "Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ù…Ø¶Ù…ÙˆÙ†Ø©! Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù…ØªØ§Ø²Ø© ğŸ‘",
    "Ø§Ø³ØªØ±Ø¬Ø§Ø¹": "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø±Ø§Ø¶ÙŠØ§Ù‹ Ø¹Ù†Ù‡. ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø± Ø¹Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹",
    "Ø£Ø³Ø¹Ø§Ø±": "Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø© Ø¬Ø¯Ø§Ù‹! Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø³Ø¹Ø± ğŸ’µ",
    "Ø¨Ø­Ø«": "Ø§Ø³ØªØ®Ø¯Ù… Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡! ğŸ”",
    "ÙØ¦Ø§Øª": "Ù„Ø¯ÙŠÙ†Ø§ ÙØ¦Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©: Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§ØªØŒ Ù…Ù„Ø§Ø¨Ø³ØŒ Ù…Ù†ØªØ¬Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ©ØŒ ÙˆØ£ÙƒØ«Ø±! ğŸ“‚",
    "Ù…Ø±Ø­Ø¨Ø§": "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! ğŸ‘‹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
    "Ø§Ù„Ø³Ù„Ø§Ù…": "ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡! ğŸ‘‹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
    "Ø´ÙƒØ±Ø§": "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ˜Š Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¡ Ø¢Ø®Ø± ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¨Ù‡ØŸ",
    "Ø´ÙƒØ±Ùƒ": "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ˜Š Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¡ Ø¢Ø®Ø± ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¨Ù‡ØŸ",
};

// Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø±ÙˆØ¨ÙˆØª
function getBotResponse(userText) {
    const normalizedText = userText.toLowerCase().trim();

    // 1. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
    for (const keyword in keywordMap) {
        if (normalizedText.includes(keyword)) {
            return keywordMap[keyword];
        }
    }

    // 2. Ø¥Ø¬Ø§Ø¨Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    return "Ø£Ù†Ø§ Ø¢Ø³ÙØŒ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­Ø¯Ø¯Ø© Ù„Ø³Ø¤Ø§Ù„Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨! ğŸ“±";
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
function appendMessage(sender, text) {
    const messagesDiv = document.getElementById('chatbot-messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}-message`;
    messageDiv.textContent = text;
    messagesDiv.appendChild(messageDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight; // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
function sendMessage() {
    const userInput = document.getElementById('user-input');
    const text = userInput.value.trim();

    if (text === "") return;

    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    appendMessage('user', text);
    userInput.value = '';

    // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ø§Ù„Ø±Ø¯
    setTimeout(() => {
        const botResponse = getBotResponse(text);
        appendMessage('bot', botResponse);
    }, 500);
}

// Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
document.addEventListener('DOMContentLoaded', () => {
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatbotClose = document.getElementById('chatbot-close');
    const sendButton = document.getElementById('send-button');
    const userInput = document.getElementById('user-input');

    // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±ÙˆØ¨ÙˆØª
    if (chatbotToggle) {
        chatbotToggle.addEventListener('click', () => {
            const isHidden = chatbotWindow.classList.toggle('hidden');
            chatbotToggle.setAttribute('aria-expanded', !isHidden);
            if (!isHidden) {
                userInput.focus();
            }
        });
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±ÙˆØ¨ÙˆØª
    if (chatbotClose) {
        chatbotClose.addEventListener('click', () => {
            chatbotWindow.classList.add('hidden');
            chatbotToggle.setAttribute('aria-expanded', 'false');
        });
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
    if (sendButton) {
        sendButton.addEventListener('click', sendMessage);
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
    if (userInput) {
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    }
});
